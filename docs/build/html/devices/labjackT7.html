

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Labjack T7 &mdash; EMERGENT 0.1alpha documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="EMERGENT 0.1alpha documentation" href="../index.html"/>
        <link rel="up" title="Devices" href="../devices.html"/>
        <link rel="next" title="Mirrorcle PicoAmp" href="picoAmp.html"/>
        <link rel="prev" title="TDK Genesys" href="genesys.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> EMERGENT
          

          
          </a>

          
            
            
              <div class="version">
                0.1alpha
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">EMERGENT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimization.html">Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networkflow.html">Network flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archetypes.html">Archetypes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../devices.html">Devices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="current_driver.html">Current driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="genesys.html">TDK Genesys</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Labjack T7</a></li>
<li class="toctree-l2"><a class="reference internal" href="picoAmp.html">Mirrorcle PicoAmp</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EMERGENT</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../devices.html">Devices</a> &raquo;</li>
        
      <li>Labjack T7</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/devices/labjackT7.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-labjackT7">
<span id="labjack-t7"></span><h1>Labjack T7<a class="headerlink" href="#module-labjackT7" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="labjackT7.LabJack">
<em class="property">class </em><code class="descclassname">labjackT7.</code><code class="descname">LabJack</code><span class="sig-paren">(</span><em>device='ANY'</em>, <em>connection='ANY'</em>, <em>devid='ANY'</em>, <em>arange=10</em>, <em>name='LabJack'</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">emergent.archetypes.parallel.ProcessHandler</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">emergent.archetypes.node.Device</span></code></p>
<p>Python interface for the LabJack T7.</p>
<dl class="method">
<dt id="labjackT7.LabJack.AIn">
<code class="descname">AIn</code><span class="sig-paren">(</span><em>channel</em>, <em>num=1</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.AIn" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a channel with optional averaging.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>channel</strong> (<em>int</em>) -- number of the target AIN channel.</li>
<li><strong>num</strong> (<em>int</em>) -- number of measurements to perform and average.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.AOut">
<code class="descname">AOut</code><span class="sig-paren">(</span><em>channel</em>, <em>value</em>, <em>HV=False</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.AOut" title="Permalink to this definition">¶</a></dt>
<dd><p>Output an analog voltage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>channel</strong> (<em>int</em>) -- number of the target DAC channel.</li>
<li><strong>value</strong> (<em>float</em>) -- Voltage in volts.</li>
<li><strong>HV</strong> (<em>bool</em>) -- If False, use a DAC channel (0-5 V); if True, use a TDAC channel with the LJTick-DAC accessory (+/-10 V).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.DOut">
<code class="descname">DOut</code><span class="sig-paren">(</span><em>channel</em>, <em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.DOut" title="Permalink to this definition">¶</a></dt>
<dd><p>Output a digital signal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>channel</strong> (<em>str</em>) -- a digital channel on the LabJack, e.g. 'FIO4'.</li>
<li><strong>state</strong> (<em>int</em>) -- 1 or 0</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.PWM">
<code class="descname">PWM</code><span class="sig-paren">(</span><em>channel</em>, <em>frequency</em>, <em>duty_cycle</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.PWM" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts pulse width modulation on an FIO channel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>channel</strong> (<em>int</em>) -- FIO channel to use (0 or 2-5).</li>
<li><strong>frequency</strong> (<em>float</em>) -- desired frequency in Hz</li>
<li><strong>duty_cycle</strong> (<em>float</em>) -- duty cycle between 0 and 100.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.PWM_stop">
<code class="descname">PWM_stop</code><span class="sig-paren">(</span><em>channel</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.PWM_stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>device='ANY'</em>, <em>connection='ANY'</em>, <em>devid='ANY'</em>, <em>arange=10</em>, <em>name='LabJack'</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to connect to a LabJack.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> (<em>str</em>) -- Device type (&quot;ANY&quot;, &quot;T7&quot; are currently supported).</li>
<li><strong>connection</strong> (<em>str</em>) -- Desired connection type (&quot;ANY&quot;, &quot;USB&quot;, &quot;TCP&quot;, &quot;ETHERNET&quot;, or &quot;WIFI&quot;).</li>
<li><strong>devid</strong> (<em>str</em>) -- Serial number, which can be found on the underside of the LabJack.</li>
<li><strong>arange</strong> (<em>float</em>) -- analog input range.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack._actuate">
<code class="descname">_actuate</code><span class="sig-paren">(</span><em>state</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack._actuate" title="Permalink to this definition">¶</a></dt>
<dd><p>Private placeholder for the device-specific driver.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">State actuation is done by first calling the Device.actuate() method,
which calls Device._actuate(state) to change something in the lab, then
calls Device.update(state) to register this new state with EMERGENT.
When you write a driver inheriting from Device, you should reimplement
this method to update your device to the specified state only - do not
update any stored states such as Device.state, Input.state, or Control.state
from this method.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>state</strong> (<em>dict</em>) -- Target state of the form {'param1':value1, 'param2':value2,...}.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack._command">
<code class="descname">_command</code><span class="sig-paren">(</span><em>register</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack._command" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a value to a specified register.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>register</strong> (<em>str</em>) -- a Modbus register on the LabJack.</li>
<li><strong>value</strong> -- the value to write to the register.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack._connect">
<code class="descname">_connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack._connect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="labjackT7.LabJack.averaging_array">
<code class="descname">averaging_array</code><em class="property"> = None</em><a class="headerlink" href="#labjackT7.LabJack.averaging_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a FIFO queue running in a separate thread so that multiple
simultaneous threads can share a LabJack without interference.</p>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.prepare_streamburst">
<code class="descname">prepare_streamburst</code><span class="sig-paren">(</span><em>channel</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.prepare_streamburst" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.resample">
<code class="descname">resample</code><span class="sig-paren">(</span><em>wave</em>, <em>period</em>, <em>channels=1</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Resamples a waveform with a given period into the optimal stream.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>wave</strong> (<em>array</em>) -- An array of values describing a waveform.</li>
<li><strong>period</strong> (<em>float</em>) -- The total sequence duration.</li>
<li><strong>channels</strong> (<em>int</em>) -- Number of channels which will be simultaneously streamed; the maximum sampling rate is reduced by this factor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A list of points which will be output at the calculated sampling rate.
speed (float): Stream rate in samples/second.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">stream (array)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.sequence2stream">
<code class="descname">sequence2stream</code><span class="sig-paren">(</span><em>sequence</em>, <em>period</em>, <em>channels=1</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.sequence2stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a sequence to a stream. The LabJack has two limitations:
a maximum stream rate of 100 kS/s and a maximum sample count of
2^13-1. This method computes a cutoff period based on these two
restrictions; above the cutoff, the speed will be lowered to accommodate
longer sequences with equal numbers of samples, while below the cutoff,
the number of samples will be lowered while the speed is kept at max.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sequence</strong> (<em>list</em>) -- A list of tuples describing all changes in a setpoint; e.g. [(0,0), (0.5,1)] describes a setpoint which is switched from 0 to 1 at t=0.5.</li>
<li><strong>period</strong> (<em>float</em>) -- The total sequence duration.</li>
<li><strong>channels</strong> (<em>int</em>) -- Number of channels which will be simultaneously streamed; the maximum sampling rate is reduced by this factor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A list of points which will be output at the calculated sampling rate.
speed (float): Stream rate in samples/second.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">stream (array)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.spi_initialize">
<code class="descname">spi_initialize</code><span class="sig-paren">(</span><em>mode=3</em>, <em>CLK=0</em>, <em>CS=1</em>, <em>MOSI=2</em>, <em>MISO=3</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.spi_initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the SPI bus using several FIO ports.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>CS</strong> (<em>int</em>) -- the FIO channel to use as chip select</li>
<li><strong>CLK</strong> (<em>int</em>) -- the FIO channel to use as the clock</li>
<li><strong>MISO</strong> (<em>int</em>) -- the FIO channel to use for input</li>
<li><strong>MOSI</strong> (<em>int</em>) -- the FIO channel to use for output</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.spi_write">
<code class="descname">spi_write</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.spi_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a list of commands via SPI.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>list</em>) -- a list of bytes to send through MOSI.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.stream_out">
<code class="descname">stream_out</code><span class="sig-paren">(</span><em>channels</em>, <em>data</em>, <em>scanRate</em>, <em>loop=False</em>, <em>trigger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.stream_out" title="Permalink to this definition">¶</a></dt>
<dd><p>Streams data at a given scan rate..</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>channels</strong> (<em>list</em><em>)</em>) -- DAC channels to use; can use DAC0, DAC1, or both.</li>
<li><strong>data</strong> (<em>array</em>) -- Data to stream out.</li>
<li><strong>loop</strong> (<em>bool</em>) -- if False, data will be streamed out once; if True, the stream will loop.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The maximum buffer size of the LabJack T7 is 2^15=32768 bytes,
so up to 2^14=16384 samples can be held. At the default stream
rate of 100 kS/s, this corresponds to 163.84 ms of data. If we
want to stream for longer than that, we need to repeatedly write
half a buffer's worth of data each time the buffer is half full.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.stream_stop">
<code class="descname">stream_stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.stream_stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="labjackT7.LabJack.streamburst">
<code class="descname">streamburst</code><span class="sig-paren">(</span><em>duration</em>, <em>operation=None</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.LabJack.streamburst" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a burst stream and optionally performs a numpy array operation
on the result.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>duration</strong> (<em>float</em>) -- number of seconds to stream. Scan rate will be</li>
<li><strong>adjusted to avoid overfilling the buffer.</strong> (<em>automatically</em>) -- </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="labjackT7.queue">
<code class="descclassname">labjackT7.</code><code class="descname">queue</code><span class="sig-paren">(</span><em>func</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#labjackT7.queue" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="picoAmp.html" class="btn btn-neutral float-right" title="Mirrorcle PicoAmp" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="genesys.html" class="btn btn-neutral" title="TDK Genesys" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Robert Fasano.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>